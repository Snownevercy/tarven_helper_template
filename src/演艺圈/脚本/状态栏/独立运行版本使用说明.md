# 独立运行版本使用说明

## 📋 文件位置

独立运行版本的代码位于：`src/演艺圈/脚本/状态栏/独立运行版本.ts`

## 🚀 使用方法

### 方法一：直接复制代码（推荐）

1. 打开 `独立运行版本.ts` 文件
2. 全选并复制所有代码（Ctrl+A, Ctrl+C）
3. 在酒馆助手的脚本库中创建一个新脚本
4. 将复制的代码粘贴到脚本编辑器中
5. 保存并启用脚本

### 方法二：构建后使用

如果你想使用构建后的版本：

```bash
# 构建项目
pnpm build

# 构建后的文件位于
dist/演艺圈/脚本/状态栏/独立运行版本.js
```

然后将构建后的 JavaScript 代码复制到酒馆助手中。

## ⚠️ 前置要求

使用此脚本前，需要确保：

1. **MVU 变量框架已加载**
   - 脚本会自动等待 `window.Mvu` 初始化
   - 确保 MVU 变量框架脚本已先加载

2. **变量结构已注册**
   - 确保变量结构脚本已加载并注册了 Schema
   - 脚本使用内联的 Schema 定义，但需要 MVU 框架支持

3. **全局依赖可用**
   - `$` (jQuery) - 脚本会自动等待
   - `_` (lodash) - 需要全局可用
   - `z` (zod) - 需要全局可用
   - `toastr` - 用于显示提示消息
   - `errorCatched` - 错误捕获函数
   - `waitGlobalInitialized` - 等待全局初始化函数

## 🔧 功能说明

此独立版本包含以下功能：

- ✅ 状态栏界面显示
- ✅ 档案、商业、人脉、情报四个标签页
- ✅ 运行项目的新增、编辑、删除功能
- ✅ 重算现金功能
- ✅ 自动数据更新
- ✅ 界面位置切换
- ✅ BGM 控制

## 📝 注意事项

1. **代码较长**：由于内联了所有依赖，代码文件较大（约 1000+ 行）
2. **类型检查**：在酒馆助手中运行时，TypeScript 类型检查会被忽略
3. **错误处理**：脚本已包含错误处理，但建议在浏览器控制台查看是否有错误

## 🐛 故障排除

如果脚本无法运行：

1. **检查控制台**：打开浏览器开发者工具（F12），查看 Console 标签
2. **检查依赖**：确认所有全局依赖（jQuery、lodash、zod 等）已加载
3. **检查 MVU**：在控制台输入 `window.Mvu` 确认 MVU 框架可用
4. **检查变量**：确认变量数据已正确初始化

## 💡 提示

- 如果遇到 `waitUntil` 未定义的错误，脚本已包含备用实现
- 如果遇到类型错误，可以忽略（在运行时不会影响功能）
- 建议先测试基本功能，确认一切正常后再使用完整功能
